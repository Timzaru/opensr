{"ts":1380565245245,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"from django.contrib import admin\nfrom django import forms\nfrom django.contrib.flatpages.models import FlatPage\nfrom test.admin_actions import export_as_csv\nfrom test.models import (Test, Block, ImageStimulus, TextStimulus, ExperimentalGroup, Trial, Category, Participant)\nfrom test.forms import (AtLeastOneFormSet, PageForm)\nfrom django.contrib.flatpages.admin import FlatPageAdmin\n\nclass ImageStimulusInline(admin.TabularInline):\n    model = ImageStimulus\n    \nclass TextStimulusInline(admin.TabularInline):\n    model = TextStimulus \n            \nclass ExperimentalGroupInline(admin.StackedInline):\n    model = ExperimentalGroup\n    extra = 1\n    formset = AtLeastOneFormSet\n    \nclass TrialInline(admin.TabularInline):\n    model = Trial\n    extra = 1   \n    readonly_fields = ('date', 'time', 'participant', 'block', 'practice', \n                  'primary_left_category', 'secondary_left_category', 'primary_right_category', \n                  'secondary_right_category', 'stimulus', 'correct', 'latency')\n    exclude = ('test', 'experimental_group', )\n    \n    def has_add_permission(self, request, obj=None):\n        return False\n    \n    def has_delete_permission(self, request, obj=None):\n        return False\n    \nclass BlockInline(admin.StackedInline):\n    model = Block\n    extra = 1\n        \nclass TestForm(forms.ModelForm):\n    \n    class Meta:\n        model = Test\n        widgets = {\n            'password': forms.PasswordInput(),\n        }\n\nclass CategoryAdmin(admin.ModelAdmin):\n    ordering = ('category_name',)\n    list_display = ('category_name',)\n    inlines = [\n        ImageStimulusInline, TextStimulusInline\n    ]\n    \nclass TestAdmin(admin.ModelAdmin):  \n    form = TestForm\n    ordering = ('test_name',)\n    list_display = ('test_name', 'is_active')\n    inlines = [\n        ExperimentalGroupInline\n    ]    \n    \nclass BlockAdmin(admin.ModelAdmin):\n    ordering = ('block_name',)\n    search_fields = ('test__test_name', )\n    list_filter = ('test__test_name', )\n    list_display = ('block_name', 'test')\n\nclass PageAdmin(FlatPageAdmin):\n    form = PageForm\n\nclass ParticipantAdmin(admin.ModelAdmin):\n    actions = [export_as_csv]\n    ordering = ('id',)\n    fields = ('test', 'experimental_group')\n    list_display = ('id', 'experimental_group', 'test', 'has_completed_test')\n    search_fields = ('experimental_group__group_name', 'test__test_name')\n    readonly_fields = ('experimental_group', 'test')\n    list_filter = ('experimental_group', 'test__test_name', 'test__is_active', 'has_completed_test')\n    inlines = [\n        TrialInline\n    ]    \n    \n    def has_add_permission(self, request, obj=None):\n        return False\n    \n    def has_delete_permission(self, request, obj=None):\n        return False\n    \n    def get_actions(self, request):\n        actions = super(ParticipantAdmin, self).get_actions(request)\n        if 'delete_selected' in actions:\n            del actions['delete_selected']\n        return actions\n    \nadmin.site.unregister(FlatPage)\nadmin.site.register(FlatPage, PageAdmin)\nadmin.site.register(Category, CategoryAdmin)\nadmin.site.register(Test, TestAdmin)\nadmin.site.register(Block, BlockAdmin)\nadmin.site.register(Participant, ParticipantAdmin)"]],"start1":0,"start2":0,"length1":0,"length2":3201}]],"length":3201}
{"contributors":[],"silentsave":false,"ts":1381874104317,"patch":[[{"diffs":[[0,"imulus\n    \n"],[1,"    class Meta:\n        verbose_name='Image Stimuli'\n    \n"],[0,"class TextSt"]],"start1":450,"start2":450,"length1":24,"length2":82},{"diffs":[[0,"imulus \n"],[1,"    \n    class Meta:\n        verbose_name='Text Stimuli'\n"],[0,"        "]],"start1":585,"start2":585,"length1":16,"length2":73}]],"length":3316,"saved":false}
{"ts":1381874161407,"patch":[[{"diffs":[[0,"    "],[-1,"\n    class Meta:\n        "],[0,"verb"]],"start1":457,"start2":457,"length1":33,"length2":8},{"diffs":[[0,"    "],[-1,"\n    class Meta:\n        "],[0,"verb"]],"start1":568,"start2":568,"length1":33,"length2":8}]],"length":3266,"saved":false}
{"ts":1381874185259,"patch":[[{"diffs":[[0,"Image Stimul"],[-1,"i"],[1,"us"],[0,"'\n    \nclass"]],"start1":475,"start2":475,"length1":25,"length2":26},{"diffs":[[0,"t Stimul"],[-1,"i"],[1,"us"],[0,"'\n      "]],"start1":590,"start2":590,"length1":17,"length2":18}]],"length":3268,"saved":false}
{"ts":1381874219049,"patch":[[{"diffs":[[0,"ose_name"],[1,"_plural"],[0,"='Image "]],"start1":465,"start2":465,"length1":16,"length2":23},{"diffs":[[0,"Image Stimul"],[-1,"us"],[1,"i"],[0,"'\n    \nclass"]],"start1":482,"start2":482,"length1":26,"length2":25},{"diffs":[[0,"ose_name"],[1,"_plural"],[0,"='Text S"]],"start1":583,"start2":583,"length1":16,"length2":23},{"diffs":[[0,"t Stimul"],[-1,"us"],[1,"i"],[0,"'\n      "]],"start1":603,"start2":603,"length1":18,"length2":17}]],"length":3280,"saved":false}
{"contributors":[],"silentsave":false,"ts":1381931888751,"patch":[[{"diffs":[[0,"ageAdmin"],[1,"\nfrom django.contrib.sites.models import Site"],[0,"\n\nclass "]],"start1":373,"start2":373,"length1":16,"length2":61}]],"length":3325,"saved":false}
{"ts":1381931902182,"patch":[[{"diffs":[[0,"cipantAdmin)"],[1,"\nadmin.site.unregister(Site)"]],"start1":3313,"start2":3313,"length1":12,"length2":40}]],"length":3353,"saved":false}
